{
   "type": "object",
   "$id": "Config.json",
   "$schema": "https://json-schema.org/draft/2020-12/schema",

   "title": "Config-schema",
   "additionalProperties": false,

   "properties":
   {
      "application":
      {
         "type": "object",
         "additionalProperties": false,
         "required": ["index","class","virtual","location","admin"],
         "properties":
         {
            "index":
            {
               "type": "string",
               "description": "Starting point. Typically 'index.html'"
            }
            ,
            "class":
            {
               "type": "string",
               "description": "Java Application class. Intercepts requests for implementing logic"
            }
            ,
            "virtual":
            {
               "type": "array",
               "description": "Handles 'virtual' urls enabling browsers to show urls that doesn't corresponds to files",
               "items":
               {
                  "type": "object",
                  "required": ["path","page"],
                  "description": "Anything that starts with 'path' will go to 'page'",
                  "properties":
                  {
                     "path": {"type": "string"},
                     "page": {"type": "string"}
                  }
               }
            }
            ,
            "location":
            {
               "type": "string",
               "description": "Path to application (index.html)"
            }
            ,
            "admin":
            {
               "type": "object",
               "additionalProperties": false,
               "required": ["path","username","password","ssl-required"],
               "properties":
               {
                  "path": {"type": "string"},
                  "username": {"type": "string"},
                  "password": {"type": "string"},
                  "ssl-required": {"type": "boolean"}
               }
            }
         }
      }
      ,
      "cluster":
      {
         "type": "object",
         "additionalProperties": false,
         "required": ["type","endpoint"],
         "description": "Defines all server types, how to reach them, and for embedded only queue-length and worker-threads",
         "properties":
         {
            "types":
            {
               "type": "array",
               "additionalProperties": false,
               "required": ["types"],
               "description": "Defines all server types, how to reach them, and for embedded only queue-length and worker-threads",
               "items":
               {
                  "type": "object",
                  "required": ["type","endpoint"],
                  "description": "Anything that starts with 'path' will go to 'page'",
                  "properties":
                  {
                     "type": {"type": "string"},
                     "embedded": {"type": "boolean", "description": "Use embedded server"},
                     "endpoint": {"type": "string" , "description": "url to reach server (from backend)"},
                     "location": {"type": "string" , "description": "overrule path to application"},
                     "queue-length": {"type": "integer", "description": "Only embedded server (see HTTPServer)"},
                     "worker-threads": {"type": "integer", "description": "Only embedded server (see HTTPServer)"}
                  }
               }
            }
         }
      }
   }
}